/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/cbor-sync";
exports.ids = ["vendor-chunks/cbor-sync"];
exports.modules = {

/***/ "(ssr)/./node_modules/cbor-sync/main.js":
/*!****************************************!*\
  !*** ./node_modules/cbor-sync/main.js ***!
  \****************************************/
/***/ (function(module, exports) {

eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global, factory) {\n\tif (true) {\n\t\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t} else {}\n})(this, function () {\n\tvar CBOR = (function () {\n\t\tfunction BinaryHex(hex) {\n\t\t\tthis.$hex = hex;\n\t\t}\n\t\tBinaryHex.prototype = {\n\t\t\tlength: function () {\n\t\t\t\treturn this.$hex.length/2;\n\t\t\t},\n\t\t\ttoString: function (format) {\n\t\t\t\tif (!format || format === 'hex' || format === 16) return this.$hex;\n\t\t\t\tif (format === 'utf-8') {\n\t\t\t\t\tvar encoded = '';\n\t\t\t\t\tfor (var i = 0; i < this.$hex.length; i += 2) {\n\t\t\t\t\t\tencoded += '%' + this.$hex.substring(i, i + 2);\n\t\t\t\t\t}\n\t\t\t\t\treturn decodeURIComponent(encoded);\n\t\t\t\t}\n\t\t\t\tif (format === 'latin') {\n\t\t\t\t\tvar encoded = [];\n\t\t\t\t\tfor (var i = 0; i < this.$hex.length; i += 2) {\n\t\t\t\t\t\tencoded.push(parseInt(this.$hex.substring(i, i + 2), 16));\n\t\t\t\t\t}\n\t\t\t\t\treturn String.fromCharCode.apply(String, encoded);\n\t\t\t\t}\n\t\t\t\tthrow new Error('Unrecognised format: ' + format);\n\t\t\t}\n\t\t};\n\t\tBinaryHex.fromLatinString = function (latinString) {\n\t\t\tvar hex = '';\n\t\t\tfor (var i = 0; i < latinString.length; i++) {\n\t\t\t\tvar pair = latinString.charCodeAt(i).toString(16);\n\t\t\t\tif (pair.length === 1) pair = \"0\" + pair;\n\t\t\t\thex += pair;\n\t\t\t}\n\t\t\treturn new BinaryHex(hex);\n\t\t};\n\t\tBinaryHex.fromUtf8String = function (utf8String) {\n\t\t\tvar encoded = encodeURIComponent(utf8String);\n\t\t\tvar hex = '';\n\t\t\tfor (var i = 0; i < encoded.length; i++) {\n\t\t\t\tif (encoded.charAt(i) === '%') {\n\t\t\t\t\thex += encoded.substring(i + 1, i + 3);\n\t\t\t\t\ti += 2;\n\t\t\t\t} else {\n\t\t\t\t\tvar hexPair = encoded.charCodeAt(i).toString(16);\n\t\t\t\t\tif (hexPair.length < 2) hexPair = \"0\" + hexPair;\n\t\t\t\t\thex += hexPair;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn new BinaryHex(hex);\n\t\t};\n\n\t\tvar semanticEncoders = [];\n\t\tvar semanticDecoders = {};\n\t\n\t\tvar notImplemented = function (label) {\n\t\t\treturn function () {\n\t\t\t\tthrow new Error(label + ' not implemented');\n\t\t\t};\n\t\t};\n\t\n\t\tfunction Reader() {\n\t\t}\n\t\tReader.prototype = {\n\t\t\tpeekByte: notImplemented('peekByte'),\n\t\t\treadByte: notImplemented('readByte'),\n\t\t\treadChunk: notImplemented('readChunk'),\n\t\t\treadFloat16: function () {\n\t\t\t\tvar half = this.readUint16();\n\t\t\t\tvar exponent = (half&0x7fff) >> 10;\n\t\t\t\tvar mantissa = half&0x3ff;\n\t\t\t\tvar negative = half&0x8000;\n\t\t\t\tif (exponent === 0x1f) {\n\t\t\t\t\tif (mantissa === 0) {\n\t\t\t\t\t\treturn negative ? -Infinity : Infinity;\n\t\t\t\t\t}\n\t\t\t\t\treturn NaN;\n\t\t\t\t}\n\t\t\t\tvar magnitude = exponent ? Math.pow(2, exponent - 25)*(1024 + mantissa) : Math.pow(2, -24)*mantissa;\n\t\t\t\treturn negative ? -magnitude : magnitude;\n\t\t\t},\n\t\t\treadFloat32: function () {\n\t\t\t\tvar intValue = this.readUint32();\n\t\t\t\tvar exponent = (intValue&0x7fffffff) >> 23;\n\t\t\t\tvar mantissa = intValue&0x7fffff;\n\t\t\t\tvar negative = intValue&0x80000000;\n\t\t\t\tif (exponent === 0xff) {\n\t\t\t\t\tif (mantissa === 0) {\n\t\t\t\t\t\treturn negative ? -Infinity : Infinity;\n\t\t\t\t\t}\n\t\t\t\t\treturn NaN;\n\t\t\t\t}\n\t\t\t\tvar magnitude = exponent ? Math.pow(2, exponent - 23 - 127)*(8388608 + mantissa) : Math.pow(2, -23 - 126)*mantissa;\n\t\t\t\treturn negative ? -magnitude : magnitude;\n\t\t\t},\n\t\t\treadFloat64: function () {\n\t\t\t\tvar int1 = this.readUint32(), int2 = this.readUint32();\n\t\t\t\tvar exponent = (int1 >> 20)&0x7ff;\n\t\t\t\tvar mantissa = (int1&0xfffff)*4294967296 + int2;\n\t\t\t\tvar negative = int1&0x80000000;\n\t\t\t\tif (exponent === 0x7ff) {\n\t\t\t\t\tif (mantissa === 0) {\n\t\t\t\t\t\treturn negative ? -Infinity : Infinity;\n\t\t\t\t\t}\n\t\t\t\t\treturn NaN;\n\t\t\t\t}\n\t\t\t\tvar magnitude = exponent ? Math.pow(2, exponent - 52 - 1023)*(4503599627370496 + mantissa) : Math.pow(2, -52 - 1022)*mantissa;\n\t\t\t\treturn negative ? -magnitude : magnitude;\n\t\t\t},\n\t\t\treadUint16: function () {\n\t\t\t\treturn this.readByte()*256 + this.readByte();\n\t\t\t},\n\t\t\treadUint32: function () {\n\t\t\t\treturn this.readUint16()*65536 + this.readUint16();\n\t\t\t},\n\t\t\treadUint64: function () {\n\t\t\t\treturn this.readUint32()*4294967296 + this.readUint32();\n\t\t\t}\n\t\t};\n\t\tfunction Writer() {\n\t\t}\n\t\tWriter.prototype = {\n\t\t\twriteByte: notImplemented('writeByte'),\n\t\t\tresult: notImplemented('result'),\n\t\t\twriteFloat16: notImplemented('writeFloat16'),\n\t\t\twriteFloat32: notImplemented('writeFloat32'),\n\t\t\twriteFloat64: notImplemented('writeFloat64'),\n\t\t\twriteUint16: function (value) {\n\t\t\t\tthis.writeByte((value >> 8)&0xff);\n\t\t\t\tthis.writeByte(value&0xff);\n\t\t\t},\n\t\t\twriteUint32: function (value) {\n\t\t\t\tthis.writeUint16((value>>16)&0xffff);\n\t\t\t\tthis.writeUint16(value&0xffff);\n\t\t\t},\n\t\t\twriteUint64: function (value) {\n\t\t\t\tif (value >= 9007199254740992 || value <= -9007199254740992) {\n\t\t\t\t\tthrow new Error('Cannot encode Uint64 of: ' + value + ' magnitude to big (floating point errors)');\n\t\t\t\t}\n\t\t\t\tthis.writeUint32(Math.floor(value/4294967296));\n\t\t\t\tthis.writeUint32(value%4294967296);\n\t\t\t},\n\t\t\twriteString: notImplemented('writeString'),\n\t\t\tcanWriteBinary: function (chunk) {\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\twriteBinary: notImplemented('writeChunk')\n\t\t};\n\n\t\tfunction readHeaderRaw(reader) {\n\t\t\tvar firstByte = reader.readByte();\n\t\t\tvar majorType = firstByte >> 5, value = firstByte&0x1f;\n\t\t\treturn {type: majorType, value: value};\n\t\t}\n\t\n\t\tfunction valueFromHeader(header, reader) {\n\t\t\tvar value = header.value;\n\t\t\tif (value < 24) {\n\t\t\t\treturn value;\n\t\t\t} else if (value == 24) {\n\t\t\t\treturn reader.readByte();\n\t\t\t} else if (value == 25) {\n\t\t\t\treturn reader.readUint16();\n\t\t\t} else if (value == 26) {\n\t\t\t\treturn reader.readUint32();\n\t\t\t} else if (value == 27) {\n\t\t\t\treturn reader.readUint64();\n\t\t\t} else if (value == 31) {\n\t\t\t\t// special value for non-terminating arrays/objects\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tnotImplemented('Additional info: ' + value)();\n\t\t}\n\t\n\t\tfunction writeHeaderRaw(type, value, writer) {\n\t\t\twriter.writeByte((type<<5)|value);\n\t\t}\n\t\n\t\tfunction writeHeader(type, value, writer) {\n\t\t\tvar firstByte = type<<5;\n\t\t\tif (value < 24) {\n\t\t\t\twriter.writeByte(firstByte|value);\n\t\t\t} else if (value < 256) {\n\t\t\t\twriter.writeByte(firstByte|24);\n\t\t\t\twriter.writeByte(value);\n\t\t\t} else if (value < 65536) {\n\t\t\t\twriter.writeByte(firstByte|25);\n\t\t\t\twriter.writeUint16(value);\n\t\t\t} else if (value < 4294967296) {\n\t\t\t\twriter.writeByte(firstByte|26);\n\t\t\t\twriter.writeUint32(value);\n\t\t\t} else {\n\t\t\t\twriter.writeByte(firstByte|27);\n\t\t\t\twriter.writeUint64(value);\n\t\t\t}\n\t\t}\n\t\n\t\tvar stopCode = new Error(); // Just a unique object, that won't compare strictly equal to anything else\n\t\n\t\tfunction decodeReader(reader) {\n\t\t\tvar header = readHeaderRaw(reader);\n\t\t\tswitch (header.type) {\n\t\t\t\tcase 0:\n\t\t\t\t\treturn valueFromHeader(header, reader);\n\t\t\t\tcase 1:\n\t\t\t\t\treturn -1 -valueFromHeader(header, reader);\n\t\t\t\tcase 2:\n\t\t\t\t\treturn reader.readChunk(valueFromHeader(header, reader));\n\t\t\t\tcase 3:\n\t\t\t\t\tvar buffer = reader.readChunk(valueFromHeader(header, reader));\n\t\t\t\t\treturn buffer.toString('utf-8');\n\t\t\t\tcase 4:\n\t\t\t\tcase 5:\n\t\t\t\t\tvar arrayLength = valueFromHeader(header, reader);\n\t\t\t\t\tvar result = [];\n\t\t\t\t\tif (arrayLength !== null) {\n\t\t\t\t\t\tif (header.type === 5) {\n\t\t\t\t\t\t\tarrayLength *= 2;\n\t\t\t\t\t\t} \n\t\t\t\t\t\tfor (var i = 0; i < arrayLength; i++) {\n\t\t\t\t\t\t\tresult[i] = decodeReader(reader);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar item;\n\t\t\t\t\t\twhile ((item = decodeReader(reader)) !== stopCode) {\n\t\t\t\t\t\t\tresult.push(item);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (header.type === 5) {\n\t\t\t\t\t\tvar objResult = {};\n\t\t\t\t\t\tfor (var i = 0; i < result.length; i += 2) {\n\t\t\t\t\t\t\tobjResult[result[i]] = result[i + 1];\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn objResult;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn result;\n\t\t\t\t\t}\n\t\t\t\tcase 6:\n\t\t\t\t\tvar tag = valueFromHeader(header, reader);\n\t\t\t\t\tvar decoder = semanticDecoders[tag];\n\t\t\t\t\tvar result = decodeReader(reader);\n\t\t\t\t\treturn decoder ? decoder(result) : result;\n\t\t\t\tcase 7:\n\t\t\t\t\tif (header.value === 25) {\n\t\t\t\t\t\treturn reader.readFloat16();\n\t\t\t\t\t} else if (header.value === 26) {\n\t\t\t\t\t\treturn reader.readFloat32();\n\t\t\t\t\t} else if (header.value === 27) {\n\t\t\t\t\t\treturn reader.readFloat64();\n\t\t\t\t\t}\n\t\t\t\t\tswitch (valueFromHeader(header, reader)) {\n\t\t\t\t\t\tcase 20:\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\tcase 21:\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\tcase 22:\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\tcase 23:\n\t\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t\tcase null:\n\t\t\t\t\t\t\treturn stopCode;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tthrow new Error('Unknown fixed value: ' + header.value);\n\t\t\t\t\t}\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error('Unsupported header: ' + JSON.stringify(header));\n\t\t\t}\n\t\t\tthrow new Error('not implemented yet');\n\t\t}\n\t\n\t\tfunction encodeWriter(data, writer) {\n\t\t\tfor (var i = 0; i < semanticEncoders.length; i++) {\n\t\t\t\tvar replacement = semanticEncoders[i].fn(data);\n\t\t\t\tif (replacement !== undefined) {\n\t\t\t\t\twriteHeader(6, semanticEncoders[i].tag, writer);\n\t\t\t\t\treturn encodeWriter(replacement, writer);\n\t\t\t\t}\n\t\t\t}\n\t\t\n\t\t\tif (data && typeof data.toCBOR === 'function') {\n\t\t\t\tdata = data.toCBOR();\n\t\t\t}\n\t\t\n\t\t\tif (data === false) {\n\t\t\t\twriteHeader(7, 20, writer);\n\t\t\t} else if (data === true) {\n\t\t\t\twriteHeader(7, 21, writer);\n\t\t\t} else if (data === null) {\n\t\t\t\twriteHeader(7, 22, writer);\n\t\t\t} else if (data === undefined) {\n\t\t\t\twriteHeader(7, 23, writer);\n\t\t\t} else if (typeof data === 'number') {\n\t\t\t\tif (Math.floor(data) === data && data < 9007199254740992 && data > -9007199254740992) {\n\t\t\t\t\t// Integer\n\t\t\t\t\tif (data < 0) {\n\t\t\t\t\t\twriteHeader(1, -1 - data, writer);\n\t\t\t\t\t} else {\n\t\t\t\t\t\twriteHeader(0, data, writer);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\twriteHeaderRaw(7, 27, writer);\n\t\t\t\t\twriter.writeFloat64(data);\n\t\t\t\t}\n\t\t\t} else if (typeof data === 'string') {\n\t\t\t\twriter.writeString(data, function (length) {\n\t\t\t\t\twriteHeader(3, length, writer);\n\t\t\t\t});\n\t\t\t} else if (writer.canWriteBinary(data)) {\n\t\t\t\twriter.writeBinary(data, function (length) {\n\t\t\t\t\twriteHeader(2, length, writer);\n\t\t\t\t});\n\t\t\t} else if (typeof data === 'object') {\n\t\t\t\tif (api.config.useToJSON && typeof data.toJSON === 'function') {\n\t\t\t   \t\tdata = data.toJSON();\n\t\t\t   \t}\n\t\t\t\tif (Array.isArray(data)) {\n\t\t\t\t\twriteHeader(4, data.length, writer);\n\t\t\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\t\t\tencodeWriter(data[i], writer);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar keys = Object.keys(data);\n\t\t\t\t\twriteHeader(5, keys.length, writer);\n\t\t\t\t\tfor (var i = 0; i < keys.length; i++) {\n\t\t\t\t\t\tencodeWriter(keys[i], writer);\n\t\t\t\t\t\tencodeWriter(data[keys[i]], writer);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthrow new Error('CBOR encoding not supported: ' + data);\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar readerFunctions = [];\n\t\tvar writerFunctions = [];\n\t\n\t\tvar api = {\n\t\t\tconfig: {\n\t\t\t\tuseToJSON: true\n\t\t\t},\n\t\t\taddWriter: function (format, writerFunction) {\n\t\t\t\tif (typeof format === 'string') {\n\t\t\t\t\twriterFunctions.push(function (f) {\n\t\t\t\t\t\tif (format === f) return writerFunction(f);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\twriterFunctions.push(format);\n\t\t\t\t}\n\t\t\t},\n\t\t\taddReader: function (format, readerFunction) {\n\t\t\t\tif (typeof format === 'string') {\n\t\t\t\t\treaderFunctions.push(function (data, f) {\n\t\t\t\t\t\tif (format === f) return readerFunction(data, f);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treaderFunctions.push(format);\n\t\t\t\t}\n\t\t\t},\n\t\t\tencode: function (data, format) {\n\t\t\t\tfor (var i = 0; i < writerFunctions.length; i++) {\n\t\t\t\t\tvar func = writerFunctions[i];\n\t\t\t\t\tvar writer = func(format);\n\t\t\t\t\tif (writer) {\n\t\t\t\t\t\tencodeWriter(data, writer);\n\t\t\t\t\t\treturn writer.result();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthrow new Error('Unsupported output format: ' + format);\n\t\t\t},\n\t\t\tdecode: function (data, format) {\n\t\t\t\tfor (var i = 0; i < readerFunctions.length; i++) {\n\t\t\t\t\tvar func = readerFunctions[i];\n\t\t\t\t\tvar reader = func(data, format);\n\t\t\t\t\tif (reader) {\n\t\t\t\t\t\treturn decodeReader(reader);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthrow new Error('Unsupported input format: ' + format);\n\t\t\t},\n\t\t\taddSemanticEncode: function (tag, fn) {\n\t\t\t\tif (typeof tag !== 'number' || tag%1 !== 0 || tag < 0) {\n\t\t\t\t\tthrow new Error('Tag must be a positive integer');\n\t\t\t\t}\n\t\t\t\tsemanticEncoders.push({tag: tag, fn: fn});\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\taddSemanticDecode: function (tag, fn) {\n\t\t\t\tif (typeof tag !== 'number' || tag%1 !== 0 || tag < 0) {\n\t\t\t\t\tthrow new Error('Tag must be a positive integer');\n\t\t\t\t}\n\t\t\t\tsemanticDecoders[tag] = fn;\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\tReader: Reader,\n\t\t\tWriter: Writer\n\t\t};\n\t\t\n\t\t/** Node.js Buffers **/\n\t\tfunction BufferReader(buffer) {\n\t\t\tthis.buffer = buffer;\n\t\t\tthis.pos = 0;\n\t\t}\n\t\tBufferReader.prototype = Object.create(Reader.prototype);\n\t\tBufferReader.prototype.peekByte = function () {\n\t\t\treturn this.buffer[this.pos];\n\t\t};\n\t\tBufferReader.prototype.readByte = function () {\n\t\t\treturn this.buffer[this.pos++];\n\t\t};\n\t\tBufferReader.prototype.readUint16 = function () {\n\t\t\tvar result = this.buffer.readUInt16BE(this.pos);\n\t\t\tthis.pos += 2;\n\t\t\treturn result;\n\t\t};\n\t\tBufferReader.prototype.readUint32 = function () {\n\t\t\tvar result = this.buffer.readUInt32BE(this.pos);\n\t\t\tthis.pos += 4;\n\t\t\treturn result;\n\t\t};\n\t\tBufferReader.prototype.readFloat32 = function () {\n\t\t\tvar result = this.buffer.readFloatBE(this.pos);\n\t\t\tthis.pos += 4;\n\t\t\treturn result;\n\t\t};\n\t\tBufferReader.prototype.readFloat64 = function () {\n\t\t\tvar result = this.buffer.readDoubleBE(this.pos);\n\t\t\tthis.pos += 8;\n\t\t\treturn result;\n\t\t};\n\t\tBufferReader.prototype.readChunk = function (length) {\n\t\t\tvar result = Buffer.alloc(length);\n\t\t\tthis.buffer.copy(result, 0, this.pos, this.pos += length);\n\t\t\treturn result;\n\t\t};\n\t\n\t\tfunction BufferWriter(stringFormat) {\n\t\t\tthis.byteLength = 0;\n\t\t\tthis.defaultBufferLength = 16384; // 16k\n\t\t\tthis.latestBuffer = Buffer.alloc(this.defaultBufferLength);\n\t\t\tthis.latestBufferOffset = 0;\n\t\t\tthis.completeBuffers = [];\n\t\t\tthis.stringFormat = stringFormat;\n\t\t}\n\t\tBufferWriter.prototype = Object.create(Writer.prototype);\n\t\tBufferWriter.prototype.writeByte = function (value) {\n\t\t\tthis.latestBuffer[this.latestBufferOffset++] = value;\n\t\t\tif (this.latestBufferOffset >= this.latestBuffer.length) {\n\t\t\t\tthis.completeBuffers.push(this.latestBuffer);\n\t\t\t\tthis.latestBuffer = Buffer.alloc(this.defaultBufferLength);\n\t\t\t\tthis.latestBufferOffset = 0;\n\t\t\t}\n\t\t\tthis.byteLength++;\n\t\t}\n\t\tBufferWriter.prototype.writeFloat32 = function (value) {\n\t\t\tvar buffer = Buffer.alloc(4);\n\t\t\tbuffer.writeFloatBE(value, 0);\n\t\t\tthis.writeBuffer(buffer);\n\t\t};\n\t\tBufferWriter.prototype.writeFloat64 = function (value) {\n\t\t\tvar buffer = Buffer.alloc(8);\n\t\t\tbuffer.writeDoubleBE(value, 0);\n\t\t\tthis.writeBuffer(buffer);\n\t\t};\n\t\tBufferWriter.prototype.writeString = function (string, lengthFunc) {\n\t\t\tvar buffer = Buffer.from(string, 'utf-8');\n\t\t\tlengthFunc(buffer.length);\n\t\t\tthis.writeBuffer(buffer);\n\t\t};\n\t\tBufferWriter.prototype.canWriteBinary = function (data) {\n\t\t\treturn data instanceof Buffer;\n\t\t};\n\t\tBufferWriter.prototype.writeBinary = function (buffer, lengthFunc) {\n\t\t\tlengthFunc(buffer.length);\n\t\t\tthis.writeBuffer(buffer);\n\t\t};\n\t\tBufferWriter.prototype.writeBuffer = function (chunk) {\n\t\t\tif (!(chunk instanceof Buffer)) throw new TypeError('BufferWriter only accepts Buffers');\n\t\t\tif (!this.latestBufferOffset) {\n\t\t\t\tthis.completeBuffers.push(chunk);\n\t\t\t} else if (this.latestBuffer.length - this.latestBufferOffset >= chunk.length) {\n\t\t\t\tchunk.copy(this.latestBuffer, this.latestBufferOffset);\n\t\t\t\tthis.latestBufferOffset += chunk.length;\n\t\t\t\tif (this.latestBufferOffset >= this.latestBuffer.length) {\n\t\t\t\t\tthis.completeBuffers.push(this.latestBuffer);\n\t\t\t\t\tthis.latestBuffer = Buffer.alloc(this.defaultBufferLength);\n\t\t\t\t\tthis.latestBufferOffset = 0;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.completeBuffers.push(this.latestBuffer.slice(0, this.latestBufferOffset));\n\t\t\t\tthis.completeBuffers.push(chunk);\n\t\t\t\tthis.latestBuffer = Buffer.alloc(this.defaultBufferLength);\n\t\t\t\tthis.latestBufferOffset = 0;\n\t\t\t}\n\t\t\tthis.byteLength += chunk.length;\n\t\t}\n\t\tBufferWriter.prototype.result = function () {\n\t\t\t// Copies them all into a single Buffer\n\t\t\tvar result = Buffer.alloc(this.byteLength);\n\t\t\tvar offset = 0;\n\t\t\tfor (var i = 0; i < this.completeBuffers.length; i++) {\n\t\t\t\tvar buffer = this.completeBuffers[i];\n\t\t\t\tbuffer.copy(result, offset, 0, buffer.length);\n\t\t\t\toffset += buffer.length;\n\t\t\t}\n\t\t\tif (this.latestBufferOffset) {\n\t\t\t\tthis.latestBuffer.copy(result, offset, 0, this.latestBufferOffset);\n\t\t\t}\n\t\t\t\n\t\t\tif (this.stringFormat) return result.toString(this.stringFormat);\n\t\t\treturn result;\n\t\t}\n\t\t\n\t\tif (typeof Buffer === 'function') {\n\t\t\tapi.addReader(function (data, format) {\n\t\t\t\tif (data instanceof Buffer) {\n\t\t\t\t\treturn new BufferReader(data);\n\t\t\t\t}\n\t\t\t\tif (format === 'hex' || format === 'base64') {\n\t\t\t\t\tvar buffer = Buffer.from(data, format);\n\t\t\t\t\treturn new BufferReader(buffer);\n\t\t\t\t}\n\t\t\t});\n\t\t\tapi.addWriter(function (format) {\n\t\t\t\tif (!format || format === 'buffer') {\n\t\t\t\t\treturn new BufferWriter();\n\t\t\t\t} else if (format === 'hex' || format === 'base64') {\n\t\t\t\t\treturn new BufferWriter(format);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\n\t\t/** Hex-encoding (and Latin1) for browser **/\n\t\tfunction HexReader(hex) {\n\t\t\tthis.hex = hex;\n\t\t\tthis.pos = 0;\n\t\t}\n\t\tHexReader.prototype = Object.create(Reader.prototype);\n\t\tHexReader.prototype.peekByte = function () {\n\t\t\tvar pair = this.hex.substring(this.pos, 2);\n\t\t\treturn parseInt(pair, 16);\n\t\t};\n\t\tHexReader.prototype.readByte = function () {\n\t\t\tvar pair = this.hex.substring(this.pos, this.pos + 2);\n\t\t\tthis.pos += 2;\n\t\t\treturn parseInt(pair, 16);\n\t\t};\n\t\tHexReader.prototype.readChunk = function (length) {\n\t\t\tvar hex = this.hex.substring(this.pos, this.pos + length*2);\n\t\t\tthis.pos += length*2;\n\t\t\tif (typeof Buffer === 'function') return Buffer.from(hex, 'hex');\n\t\t\treturn new BinaryHex(hex);\n\t\t};\n\t\n\t\tfunction HexWriter(finalFormat) {\n\t\t\tthis.$hex = '';\n\t\t\tthis.finalFormat = finalFormat || 'hex'\n\t\t}\n\t\tHexWriter.prototype = Object.create(Writer.prototype);\n\t\tHexWriter.prototype.writeByte = function (value) {\n\t\t\tif (value < 0 || value > 255) throw new Error('Byte value out of range: ' + value);\n\t\t\tvar hex = value.toString(16);\n\t\t\tif (hex.length == 1) {\n\t\t\t\thex = '0' + hex;\n\t\t\t}\n\t\t\tthis.$hex += hex;\n\t\t}\n\t\tHexWriter.prototype.canWriteBinary = function (chunk) {\n\t\t\treturn chunk instanceof BinaryHex || (typeof Buffer === 'function' && chunk instanceof Buffer);\n\t\t}\n\t\tHexWriter.prototype.writeBinary = function (chunk, lengthFunction) {\n\t\t\tif (chunk instanceof BinaryHex) {\n\t\t\t\tlengthFunction(chunk.length());\n\t\t\t\tthis.$hex += chunk.$hex;\n\t\t\t} else if (typeof Buffer === 'function' && chunk instanceof Buffer) {\n\t\t\t\tlengthFunction(chunk.length);\n\t\t\t\tthis.$hex += chunk.toString('hex');\n\t\t\t} else {\n\t\t\t\tthrow new TypeError('HexWriter only accepts BinaryHex or Buffers');\n\t\t\t}\n\t\t}\n\t\tHexWriter.prototype.result = function () {\n\t\t\tif (this.finalFormat === 'buffer' && typeof Buffer === 'function') {\n\t\t\t\treturn Buffer.from(this.$hex, 'hex');\n\t\t\t}\n\t\t\treturn new BinaryHex(this.$hex).toString(this.finalFormat);\n\t\t}\n\t\tHexWriter.prototype.writeString = function (string, lengthFunction) {\n\t\t\tvar buffer = BinaryHex.fromUtf8String(string);\n\t\t\tlengthFunction(buffer.length());\n\t\t\tthis.$hex += buffer.$hex;\n\t\t}\n\n\t\tapi.addReader(function (data, format) {\n\t\t\tif (data instanceof BinaryHex || data.$hex) {\n\t\t\t\treturn new HexReader(data.$hex);\n\t\t\t}\n\t\t\tif (format === 'hex') {\n\t\t\t\treturn new HexReader(data)\n\t\t\t}\n\t\t});\n\t\tapi.addWriter(function (format) {\n\t\t\tif (format === 'hex') {\n\t\t\t\treturn new HexWriter();\n\t\t\t}\n\t\t});\n\n\t\treturn api;\n\t})();\n\n\tCBOR.addSemanticEncode(0, function (data) {\n\t\tif (data instanceof Date) {\n\t\t\treturn data.toISOString();\n\t\t}\n\t}).addSemanticDecode(0, function (isoString) {\n\t\treturn new Date(isoString);\n\t}).addSemanticDecode(1, function (isoString) {\n\t\treturn new Date(isoString);\n\t});\n\n\treturn CBOR;\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY2Jvci1zeW5jL21haW4uanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQSxLQUFLLElBQTBDO0FBQy9DLEVBQUUsaUNBQU8sRUFBRSxvQ0FBRSxPQUFPO0FBQUE7QUFBQTtBQUFBLGtHQUFDO0FBQ3JCLEdBQUcsS0FBSyxFQUlOO0FBQ0YsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHNCQUFzQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsc0JBQXNCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQix3QkFBd0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLG9CQUFvQjtBQUN2QztBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsaUNBQWlDO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0EsRUFBRTtBQUNGO0FBQ0EsRUFBRTs7QUFFRjtBQUNBLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZWZpZ2h0ZXItd2ViLy4vbm9kZV9tb2R1bGVzL2Nib3Itc3luYy9tYWluLmpzPzM5NjUiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcblx0aWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdH0gZWxzZSBpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpe1xuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHR9IGVsc2Uge1xuXHRcdGdsb2JhbC5DQk9SID0gZmFjdG9yeSgpO1xuXHR9XG59KSh0aGlzLCBmdW5jdGlvbiAoKSB7XG5cdHZhciBDQk9SID0gKGZ1bmN0aW9uICgpIHtcblx0XHRmdW5jdGlvbiBCaW5hcnlIZXgoaGV4KSB7XG5cdFx0XHR0aGlzLiRoZXggPSBoZXg7XG5cdFx0fVxuXHRcdEJpbmFyeUhleC5wcm90b3R5cGUgPSB7XG5cdFx0XHRsZW5ndGg6IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuJGhleC5sZW5ndGgvMjtcblx0XHRcdH0sXG5cdFx0XHR0b1N0cmluZzogZnVuY3Rpb24gKGZvcm1hdCkge1xuXHRcdFx0XHRpZiAoIWZvcm1hdCB8fCBmb3JtYXQgPT09ICdoZXgnIHx8IGZvcm1hdCA9PT0gMTYpIHJldHVybiB0aGlzLiRoZXg7XG5cdFx0XHRcdGlmIChmb3JtYXQgPT09ICd1dGYtOCcpIHtcblx0XHRcdFx0XHR2YXIgZW5jb2RlZCA9ICcnO1xuXHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy4kaGV4Lmxlbmd0aDsgaSArPSAyKSB7XG5cdFx0XHRcdFx0XHRlbmNvZGVkICs9ICclJyArIHRoaXMuJGhleC5zdWJzdHJpbmcoaSwgaSArIDIpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGVuY29kZWQpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChmb3JtYXQgPT09ICdsYXRpbicpIHtcblx0XHRcdFx0XHR2YXIgZW5jb2RlZCA9IFtdO1xuXHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy4kaGV4Lmxlbmd0aDsgaSArPSAyKSB7XG5cdFx0XHRcdFx0XHRlbmNvZGVkLnB1c2gocGFyc2VJbnQodGhpcy4kaGV4LnN1YnN0cmluZyhpLCBpICsgMiksIDE2KSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZywgZW5jb2RlZCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdVbnJlY29nbmlzZWQgZm9ybWF0OiAnICsgZm9ybWF0KTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdEJpbmFyeUhleC5mcm9tTGF0aW5TdHJpbmcgPSBmdW5jdGlvbiAobGF0aW5TdHJpbmcpIHtcblx0XHRcdHZhciBoZXggPSAnJztcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgbGF0aW5TdHJpbmcubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0dmFyIHBhaXIgPSBsYXRpblN0cmluZy5jaGFyQ29kZUF0KGkpLnRvU3RyaW5nKDE2KTtcblx0XHRcdFx0aWYgKHBhaXIubGVuZ3RoID09PSAxKSBwYWlyID0gXCIwXCIgKyBwYWlyO1xuXHRcdFx0XHRoZXggKz0gcGFpcjtcblx0XHRcdH1cblx0XHRcdHJldHVybiBuZXcgQmluYXJ5SGV4KGhleCk7XG5cdFx0fTtcblx0XHRCaW5hcnlIZXguZnJvbVV0ZjhTdHJpbmcgPSBmdW5jdGlvbiAodXRmOFN0cmluZykge1xuXHRcdFx0dmFyIGVuY29kZWQgPSBlbmNvZGVVUklDb21wb25lbnQodXRmOFN0cmluZyk7XG5cdFx0XHR2YXIgaGV4ID0gJyc7XG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGVuY29kZWQubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0aWYgKGVuY29kZWQuY2hhckF0KGkpID09PSAnJScpIHtcblx0XHRcdFx0XHRoZXggKz0gZW5jb2RlZC5zdWJzdHJpbmcoaSArIDEsIGkgKyAzKTtcblx0XHRcdFx0XHRpICs9IDI7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dmFyIGhleFBhaXIgPSBlbmNvZGVkLmNoYXJDb2RlQXQoaSkudG9TdHJpbmcoMTYpO1xuXHRcdFx0XHRcdGlmIChoZXhQYWlyLmxlbmd0aCA8IDIpIGhleFBhaXIgPSBcIjBcIiArIGhleFBhaXI7XG5cdFx0XHRcdFx0aGV4ICs9IGhleFBhaXI7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBuZXcgQmluYXJ5SGV4KGhleCk7XG5cdFx0fTtcblxuXHRcdHZhciBzZW1hbnRpY0VuY29kZXJzID0gW107XG5cdFx0dmFyIHNlbWFudGljRGVjb2RlcnMgPSB7fTtcblx0XG5cdFx0dmFyIG5vdEltcGxlbWVudGVkID0gZnVuY3Rpb24gKGxhYmVsKSB7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IobGFiZWwgKyAnIG5vdCBpbXBsZW1lbnRlZCcpO1xuXHRcdFx0fTtcblx0XHR9O1xuXHRcblx0XHRmdW5jdGlvbiBSZWFkZXIoKSB7XG5cdFx0fVxuXHRcdFJlYWRlci5wcm90b3R5cGUgPSB7XG5cdFx0XHRwZWVrQnl0ZTogbm90SW1wbGVtZW50ZWQoJ3BlZWtCeXRlJyksXG5cdFx0XHRyZWFkQnl0ZTogbm90SW1wbGVtZW50ZWQoJ3JlYWRCeXRlJyksXG5cdFx0XHRyZWFkQ2h1bms6IG5vdEltcGxlbWVudGVkKCdyZWFkQ2h1bmsnKSxcblx0XHRcdHJlYWRGbG9hdDE2OiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHZhciBoYWxmID0gdGhpcy5yZWFkVWludDE2KCk7XG5cdFx0XHRcdHZhciBleHBvbmVudCA9IChoYWxmJjB4N2ZmZikgPj4gMTA7XG5cdFx0XHRcdHZhciBtYW50aXNzYSA9IGhhbGYmMHgzZmY7XG5cdFx0XHRcdHZhciBuZWdhdGl2ZSA9IGhhbGYmMHg4MDAwO1xuXHRcdFx0XHRpZiAoZXhwb25lbnQgPT09IDB4MWYpIHtcblx0XHRcdFx0XHRpZiAobWFudGlzc2EgPT09IDApIHtcblx0XHRcdFx0XHRcdHJldHVybiBuZWdhdGl2ZSA/IC1JbmZpbml0eSA6IEluZmluaXR5O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gTmFOO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHZhciBtYWduaXR1ZGUgPSBleHBvbmVudCA/IE1hdGgucG93KDIsIGV4cG9uZW50IC0gMjUpKigxMDI0ICsgbWFudGlzc2EpIDogTWF0aC5wb3coMiwgLTI0KSptYW50aXNzYTtcblx0XHRcdFx0cmV0dXJuIG5lZ2F0aXZlID8gLW1hZ25pdHVkZSA6IG1hZ25pdHVkZTtcblx0XHRcdH0sXG5cdFx0XHRyZWFkRmxvYXQzMjogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHR2YXIgaW50VmFsdWUgPSB0aGlzLnJlYWRVaW50MzIoKTtcblx0XHRcdFx0dmFyIGV4cG9uZW50ID0gKGludFZhbHVlJjB4N2ZmZmZmZmYpID4+IDIzO1xuXHRcdFx0XHR2YXIgbWFudGlzc2EgPSBpbnRWYWx1ZSYweDdmZmZmZjtcblx0XHRcdFx0dmFyIG5lZ2F0aXZlID0gaW50VmFsdWUmMHg4MDAwMDAwMDtcblx0XHRcdFx0aWYgKGV4cG9uZW50ID09PSAweGZmKSB7XG5cdFx0XHRcdFx0aWYgKG1hbnRpc3NhID09PSAwKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gbmVnYXRpdmUgPyAtSW5maW5pdHkgOiBJbmZpbml0eTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIE5hTjtcblx0XHRcdFx0fVxuXHRcdFx0XHR2YXIgbWFnbml0dWRlID0gZXhwb25lbnQgPyBNYXRoLnBvdygyLCBleHBvbmVudCAtIDIzIC0gMTI3KSooODM4ODYwOCArIG1hbnRpc3NhKSA6IE1hdGgucG93KDIsIC0yMyAtIDEyNikqbWFudGlzc2E7XG5cdFx0XHRcdHJldHVybiBuZWdhdGl2ZSA/IC1tYWduaXR1ZGUgOiBtYWduaXR1ZGU7XG5cdFx0XHR9LFxuXHRcdFx0cmVhZEZsb2F0NjQ6IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0dmFyIGludDEgPSB0aGlzLnJlYWRVaW50MzIoKSwgaW50MiA9IHRoaXMucmVhZFVpbnQzMigpO1xuXHRcdFx0XHR2YXIgZXhwb25lbnQgPSAoaW50MSA+PiAyMCkmMHg3ZmY7XG5cdFx0XHRcdHZhciBtYW50aXNzYSA9IChpbnQxJjB4ZmZmZmYpKjQyOTQ5NjcyOTYgKyBpbnQyO1xuXHRcdFx0XHR2YXIgbmVnYXRpdmUgPSBpbnQxJjB4ODAwMDAwMDA7XG5cdFx0XHRcdGlmIChleHBvbmVudCA9PT0gMHg3ZmYpIHtcblx0XHRcdFx0XHRpZiAobWFudGlzc2EgPT09IDApIHtcblx0XHRcdFx0XHRcdHJldHVybiBuZWdhdGl2ZSA/IC1JbmZpbml0eSA6IEluZmluaXR5O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gTmFOO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHZhciBtYWduaXR1ZGUgPSBleHBvbmVudCA/IE1hdGgucG93KDIsIGV4cG9uZW50IC0gNTIgLSAxMDIzKSooNDUwMzU5OTYyNzM3MDQ5NiArIG1hbnRpc3NhKSA6IE1hdGgucG93KDIsIC01MiAtIDEwMjIpKm1hbnRpc3NhO1xuXHRcdFx0XHRyZXR1cm4gbmVnYXRpdmUgPyAtbWFnbml0dWRlIDogbWFnbml0dWRlO1xuXHRcdFx0fSxcblx0XHRcdHJlYWRVaW50MTY6IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMucmVhZEJ5dGUoKSoyNTYgKyB0aGlzLnJlYWRCeXRlKCk7XG5cdFx0XHR9LFxuXHRcdFx0cmVhZFVpbnQzMjogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5yZWFkVWludDE2KCkqNjU1MzYgKyB0aGlzLnJlYWRVaW50MTYoKTtcblx0XHRcdH0sXG5cdFx0XHRyZWFkVWludDY0OiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLnJlYWRVaW50MzIoKSo0Mjk0OTY3Mjk2ICsgdGhpcy5yZWFkVWludDMyKCk7XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRmdW5jdGlvbiBXcml0ZXIoKSB7XG5cdFx0fVxuXHRcdFdyaXRlci5wcm90b3R5cGUgPSB7XG5cdFx0XHR3cml0ZUJ5dGU6IG5vdEltcGxlbWVudGVkKCd3cml0ZUJ5dGUnKSxcblx0XHRcdHJlc3VsdDogbm90SW1wbGVtZW50ZWQoJ3Jlc3VsdCcpLFxuXHRcdFx0d3JpdGVGbG9hdDE2OiBub3RJbXBsZW1lbnRlZCgnd3JpdGVGbG9hdDE2JyksXG5cdFx0XHR3cml0ZUZsb2F0MzI6IG5vdEltcGxlbWVudGVkKCd3cml0ZUZsb2F0MzInKSxcblx0XHRcdHdyaXRlRmxvYXQ2NDogbm90SW1wbGVtZW50ZWQoJ3dyaXRlRmxvYXQ2NCcpLFxuXHRcdFx0d3JpdGVVaW50MTY6IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHRcdFx0XHR0aGlzLndyaXRlQnl0ZSgodmFsdWUgPj4gOCkmMHhmZik7XG5cdFx0XHRcdHRoaXMud3JpdGVCeXRlKHZhbHVlJjB4ZmYpO1xuXHRcdFx0fSxcblx0XHRcdHdyaXRlVWludDMyOiBmdW5jdGlvbiAodmFsdWUpIHtcblx0XHRcdFx0dGhpcy53cml0ZVVpbnQxNigodmFsdWU+PjE2KSYweGZmZmYpO1xuXHRcdFx0XHR0aGlzLndyaXRlVWludDE2KHZhbHVlJjB4ZmZmZik7XG5cdFx0XHR9LFxuXHRcdFx0d3JpdGVVaW50NjQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHRcdFx0XHRpZiAodmFsdWUgPj0gOTAwNzE5OTI1NDc0MDk5MiB8fCB2YWx1ZSA8PSAtOTAwNzE5OTI1NDc0MDk5Mikge1xuXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcignQ2Fubm90IGVuY29kZSBVaW50NjQgb2Y6ICcgKyB2YWx1ZSArICcgbWFnbml0dWRlIHRvIGJpZyAoZmxvYXRpbmcgcG9pbnQgZXJyb3JzKScpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHRoaXMud3JpdGVVaW50MzIoTWF0aC5mbG9vcih2YWx1ZS80Mjk0OTY3Mjk2KSk7XG5cdFx0XHRcdHRoaXMud3JpdGVVaW50MzIodmFsdWUlNDI5NDk2NzI5Nik7XG5cdFx0XHR9LFxuXHRcdFx0d3JpdGVTdHJpbmc6IG5vdEltcGxlbWVudGVkKCd3cml0ZVN0cmluZycpLFxuXHRcdFx0Y2FuV3JpdGVCaW5hcnk6IGZ1bmN0aW9uIChjaHVuaykge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9LFxuXHRcdFx0d3JpdGVCaW5hcnk6IG5vdEltcGxlbWVudGVkKCd3cml0ZUNodW5rJylcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gcmVhZEhlYWRlclJhdyhyZWFkZXIpIHtcblx0XHRcdHZhciBmaXJzdEJ5dGUgPSByZWFkZXIucmVhZEJ5dGUoKTtcblx0XHRcdHZhciBtYWpvclR5cGUgPSBmaXJzdEJ5dGUgPj4gNSwgdmFsdWUgPSBmaXJzdEJ5dGUmMHgxZjtcblx0XHRcdHJldHVybiB7dHlwZTogbWFqb3JUeXBlLCB2YWx1ZTogdmFsdWV9O1xuXHRcdH1cblx0XG5cdFx0ZnVuY3Rpb24gdmFsdWVGcm9tSGVhZGVyKGhlYWRlciwgcmVhZGVyKSB7XG5cdFx0XHR2YXIgdmFsdWUgPSBoZWFkZXIudmFsdWU7XG5cdFx0XHRpZiAodmFsdWUgPCAyNCkge1xuXHRcdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0XHR9IGVsc2UgaWYgKHZhbHVlID09IDI0KSB7XG5cdFx0XHRcdHJldHVybiByZWFkZXIucmVhZEJ5dGUoKTtcblx0XHRcdH0gZWxzZSBpZiAodmFsdWUgPT0gMjUpIHtcblx0XHRcdFx0cmV0dXJuIHJlYWRlci5yZWFkVWludDE2KCk7XG5cdFx0XHR9IGVsc2UgaWYgKHZhbHVlID09IDI2KSB7XG5cdFx0XHRcdHJldHVybiByZWFkZXIucmVhZFVpbnQzMigpO1xuXHRcdFx0fSBlbHNlIGlmICh2YWx1ZSA9PSAyNykge1xuXHRcdFx0XHRyZXR1cm4gcmVhZGVyLnJlYWRVaW50NjQoKTtcblx0XHRcdH0gZWxzZSBpZiAodmFsdWUgPT0gMzEpIHtcblx0XHRcdFx0Ly8gc3BlY2lhbCB2YWx1ZSBmb3Igbm9uLXRlcm1pbmF0aW5nIGFycmF5cy9vYmplY3RzXG5cdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0fVxuXHRcdFx0bm90SW1wbGVtZW50ZWQoJ0FkZGl0aW9uYWwgaW5mbzogJyArIHZhbHVlKSgpO1xuXHRcdH1cblx0XG5cdFx0ZnVuY3Rpb24gd3JpdGVIZWFkZXJSYXcodHlwZSwgdmFsdWUsIHdyaXRlcikge1xuXHRcdFx0d3JpdGVyLndyaXRlQnl0ZSgodHlwZTw8NSl8dmFsdWUpO1xuXHRcdH1cblx0XG5cdFx0ZnVuY3Rpb24gd3JpdGVIZWFkZXIodHlwZSwgdmFsdWUsIHdyaXRlcikge1xuXHRcdFx0dmFyIGZpcnN0Qnl0ZSA9IHR5cGU8PDU7XG5cdFx0XHRpZiAodmFsdWUgPCAyNCkge1xuXHRcdFx0XHR3cml0ZXIud3JpdGVCeXRlKGZpcnN0Qnl0ZXx2YWx1ZSk7XG5cdFx0XHR9IGVsc2UgaWYgKHZhbHVlIDwgMjU2KSB7XG5cdFx0XHRcdHdyaXRlci53cml0ZUJ5dGUoZmlyc3RCeXRlfDI0KTtcblx0XHRcdFx0d3JpdGVyLndyaXRlQnl0ZSh2YWx1ZSk7XG5cdFx0XHR9IGVsc2UgaWYgKHZhbHVlIDwgNjU1MzYpIHtcblx0XHRcdFx0d3JpdGVyLndyaXRlQnl0ZShmaXJzdEJ5dGV8MjUpO1xuXHRcdFx0XHR3cml0ZXIud3JpdGVVaW50MTYodmFsdWUpO1xuXHRcdFx0fSBlbHNlIGlmICh2YWx1ZSA8IDQyOTQ5NjcyOTYpIHtcblx0XHRcdFx0d3JpdGVyLndyaXRlQnl0ZShmaXJzdEJ5dGV8MjYpO1xuXHRcdFx0XHR3cml0ZXIud3JpdGVVaW50MzIodmFsdWUpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0d3JpdGVyLndyaXRlQnl0ZShmaXJzdEJ5dGV8MjcpO1xuXHRcdFx0XHR3cml0ZXIud3JpdGVVaW50NjQodmFsdWUpO1xuXHRcdFx0fVxuXHRcdH1cblx0XG5cdFx0dmFyIHN0b3BDb2RlID0gbmV3IEVycm9yKCk7IC8vIEp1c3QgYSB1bmlxdWUgb2JqZWN0LCB0aGF0IHdvbid0IGNvbXBhcmUgc3RyaWN0bHkgZXF1YWwgdG8gYW55dGhpbmcgZWxzZVxuXHRcblx0XHRmdW5jdGlvbiBkZWNvZGVSZWFkZXIocmVhZGVyKSB7XG5cdFx0XHR2YXIgaGVhZGVyID0gcmVhZEhlYWRlclJhdyhyZWFkZXIpO1xuXHRcdFx0c3dpdGNoIChoZWFkZXIudHlwZSkge1xuXHRcdFx0XHRjYXNlIDA6XG5cdFx0XHRcdFx0cmV0dXJuIHZhbHVlRnJvbUhlYWRlcihoZWFkZXIsIHJlYWRlcik7XG5cdFx0XHRcdGNhc2UgMTpcblx0XHRcdFx0XHRyZXR1cm4gLTEgLXZhbHVlRnJvbUhlYWRlcihoZWFkZXIsIHJlYWRlcik7XG5cdFx0XHRcdGNhc2UgMjpcblx0XHRcdFx0XHRyZXR1cm4gcmVhZGVyLnJlYWRDaHVuayh2YWx1ZUZyb21IZWFkZXIoaGVhZGVyLCByZWFkZXIpKTtcblx0XHRcdFx0Y2FzZSAzOlxuXHRcdFx0XHRcdHZhciBidWZmZXIgPSByZWFkZXIucmVhZENodW5rKHZhbHVlRnJvbUhlYWRlcihoZWFkZXIsIHJlYWRlcikpO1xuXHRcdFx0XHRcdHJldHVybiBidWZmZXIudG9TdHJpbmcoJ3V0Zi04Jyk7XG5cdFx0XHRcdGNhc2UgNDpcblx0XHRcdFx0Y2FzZSA1OlxuXHRcdFx0XHRcdHZhciBhcnJheUxlbmd0aCA9IHZhbHVlRnJvbUhlYWRlcihoZWFkZXIsIHJlYWRlcik7XG5cdFx0XHRcdFx0dmFyIHJlc3VsdCA9IFtdO1xuXHRcdFx0XHRcdGlmIChhcnJheUxlbmd0aCAhPT0gbnVsbCkge1xuXHRcdFx0XHRcdFx0aWYgKGhlYWRlci50eXBlID09PSA1KSB7XG5cdFx0XHRcdFx0XHRcdGFycmF5TGVuZ3RoICo9IDI7XG5cdFx0XHRcdFx0XHR9IFxuXHRcdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheUxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0XHRcdHJlc3VsdFtpXSA9IGRlY29kZVJlYWRlcihyZWFkZXIpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHR2YXIgaXRlbTtcblx0XHRcdFx0XHRcdHdoaWxlICgoaXRlbSA9IGRlY29kZVJlYWRlcihyZWFkZXIpKSAhPT0gc3RvcENvZGUpIHtcblx0XHRcdFx0XHRcdFx0cmVzdWx0LnB1c2goaXRlbSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChoZWFkZXIudHlwZSA9PT0gNSkge1xuXHRcdFx0XHRcdFx0dmFyIG9ialJlc3VsdCA9IHt9O1xuXHRcdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCByZXN1bHQubGVuZ3RoOyBpICs9IDIpIHtcblx0XHRcdFx0XHRcdFx0b2JqUmVzdWx0W3Jlc3VsdFtpXV0gPSByZXN1bHRbaSArIDFdO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0cmV0dXJuIG9ialJlc3VsdDtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdGNhc2UgNjpcblx0XHRcdFx0XHR2YXIgdGFnID0gdmFsdWVGcm9tSGVhZGVyKGhlYWRlciwgcmVhZGVyKTtcblx0XHRcdFx0XHR2YXIgZGVjb2RlciA9IHNlbWFudGljRGVjb2RlcnNbdGFnXTtcblx0XHRcdFx0XHR2YXIgcmVzdWx0ID0gZGVjb2RlUmVhZGVyKHJlYWRlcik7XG5cdFx0XHRcdFx0cmV0dXJuIGRlY29kZXIgPyBkZWNvZGVyKHJlc3VsdCkgOiByZXN1bHQ7XG5cdFx0XHRcdGNhc2UgNzpcblx0XHRcdFx0XHRpZiAoaGVhZGVyLnZhbHVlID09PSAyNSkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHJlYWRlci5yZWFkRmxvYXQxNigpO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAoaGVhZGVyLnZhbHVlID09PSAyNikge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHJlYWRlci5yZWFkRmxvYXQzMigpO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAoaGVhZGVyLnZhbHVlID09PSAyNykge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHJlYWRlci5yZWFkRmxvYXQ2NCgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRzd2l0Y2ggKHZhbHVlRnJvbUhlYWRlcihoZWFkZXIsIHJlYWRlcikpIHtcblx0XHRcdFx0XHRcdGNhc2UgMjA6XG5cdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHRcdGNhc2UgMjE6XG5cdFx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdFx0Y2FzZSAyMjpcblx0XHRcdFx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHRcdFx0XHRjYXNlIDIzOlxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdW5kZWZpbmVkO1xuXHRcdFx0XHRcdFx0Y2FzZSBudWxsOlxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gc3RvcENvZGU7XG5cdFx0XHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gZml4ZWQgdmFsdWU6ICcgKyBoZWFkZXIudmFsdWUpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIGhlYWRlcjogJyArIEpTT04uc3RyaW5naWZ5KGhlYWRlcikpO1xuXHRcdFx0fVxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdub3QgaW1wbGVtZW50ZWQgeWV0Jyk7XG5cdFx0fVxuXHRcblx0XHRmdW5jdGlvbiBlbmNvZGVXcml0ZXIoZGF0YSwgd3JpdGVyKSB7XG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHNlbWFudGljRW5jb2RlcnMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0dmFyIHJlcGxhY2VtZW50ID0gc2VtYW50aWNFbmNvZGVyc1tpXS5mbihkYXRhKTtcblx0XHRcdFx0aWYgKHJlcGxhY2VtZW50ICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHR3cml0ZUhlYWRlcig2LCBzZW1hbnRpY0VuY29kZXJzW2ldLnRhZywgd3JpdGVyKTtcblx0XHRcdFx0XHRyZXR1cm4gZW5jb2RlV3JpdGVyKHJlcGxhY2VtZW50LCB3cml0ZXIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XG5cdFx0XHRpZiAoZGF0YSAmJiB0eXBlb2YgZGF0YS50b0NCT1IgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0ZGF0YSA9IGRhdGEudG9DQk9SKCk7XG5cdFx0XHR9XG5cdFx0XG5cdFx0XHRpZiAoZGF0YSA9PT0gZmFsc2UpIHtcblx0XHRcdFx0d3JpdGVIZWFkZXIoNywgMjAsIHdyaXRlcik7XG5cdFx0XHR9IGVsc2UgaWYgKGRhdGEgPT09IHRydWUpIHtcblx0XHRcdFx0d3JpdGVIZWFkZXIoNywgMjEsIHdyaXRlcik7XG5cdFx0XHR9IGVsc2UgaWYgKGRhdGEgPT09IG51bGwpIHtcblx0XHRcdFx0d3JpdGVIZWFkZXIoNywgMjIsIHdyaXRlcik7XG5cdFx0XHR9IGVsc2UgaWYgKGRhdGEgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHR3cml0ZUhlYWRlcig3LCAyMywgd3JpdGVyKTtcblx0XHRcdH0gZWxzZSBpZiAodHlwZW9mIGRhdGEgPT09ICdudW1iZXInKSB7XG5cdFx0XHRcdGlmIChNYXRoLmZsb29yKGRhdGEpID09PSBkYXRhICYmIGRhdGEgPCA5MDA3MTk5MjU0NzQwOTkyICYmIGRhdGEgPiAtOTAwNzE5OTI1NDc0MDk5Mikge1xuXHRcdFx0XHRcdC8vIEludGVnZXJcblx0XHRcdFx0XHRpZiAoZGF0YSA8IDApIHtcblx0XHRcdFx0XHRcdHdyaXRlSGVhZGVyKDEsIC0xIC0gZGF0YSwgd3JpdGVyKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0d3JpdGVIZWFkZXIoMCwgZGF0YSwgd3JpdGVyKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0d3JpdGVIZWFkZXJSYXcoNywgMjcsIHdyaXRlcik7XG5cdFx0XHRcdFx0d3JpdGVyLndyaXRlRmxvYXQ2NChkYXRhKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcblx0XHRcdFx0d3JpdGVyLndyaXRlU3RyaW5nKGRhdGEsIGZ1bmN0aW9uIChsZW5ndGgpIHtcblx0XHRcdFx0XHR3cml0ZUhlYWRlcigzLCBsZW5ndGgsIHdyaXRlcik7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlIGlmICh3cml0ZXIuY2FuV3JpdGVCaW5hcnkoZGF0YSkpIHtcblx0XHRcdFx0d3JpdGVyLndyaXRlQmluYXJ5KGRhdGEsIGZ1bmN0aW9uIChsZW5ndGgpIHtcblx0XHRcdFx0XHR3cml0ZUhlYWRlcigyLCBsZW5ndGgsIHdyaXRlcik7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlIGlmICh0eXBlb2YgZGF0YSA9PT0gJ29iamVjdCcpIHtcblx0XHRcdFx0aWYgKGFwaS5jb25maWcudXNlVG9KU09OICYmIHR5cGVvZiBkYXRhLnRvSlNPTiA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0ICAgXHRcdGRhdGEgPSBkYXRhLnRvSlNPTigpO1xuXHRcdFx0ICAgXHR9XG5cdFx0XHRcdGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7XG5cdFx0XHRcdFx0d3JpdGVIZWFkZXIoNCwgZGF0YS5sZW5ndGgsIHdyaXRlcik7XG5cdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0XHRlbmNvZGVXcml0ZXIoZGF0YVtpXSwgd3JpdGVyKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dmFyIGtleXMgPSBPYmplY3Qua2V5cyhkYXRhKTtcblx0XHRcdFx0XHR3cml0ZUhlYWRlcig1LCBrZXlzLmxlbmd0aCwgd3JpdGVyKTtcblx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRcdGVuY29kZVdyaXRlcihrZXlzW2ldLCB3cml0ZXIpO1xuXHRcdFx0XHRcdFx0ZW5jb2RlV3JpdGVyKGRhdGFba2V5c1tpXV0sIHdyaXRlcik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ0NCT1IgZW5jb2Rpbmcgbm90IHN1cHBvcnRlZDogJyArIGRhdGEpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRcblx0XHR2YXIgcmVhZGVyRnVuY3Rpb25zID0gW107XG5cdFx0dmFyIHdyaXRlckZ1bmN0aW9ucyA9IFtdO1xuXHRcblx0XHR2YXIgYXBpID0ge1xuXHRcdFx0Y29uZmlnOiB7XG5cdFx0XHRcdHVzZVRvSlNPTjogdHJ1ZVxuXHRcdFx0fSxcblx0XHRcdGFkZFdyaXRlcjogZnVuY3Rpb24gKGZvcm1hdCwgd3JpdGVyRnVuY3Rpb24pIHtcblx0XHRcdFx0aWYgKHR5cGVvZiBmb3JtYXQgPT09ICdzdHJpbmcnKSB7XG5cdFx0XHRcdFx0d3JpdGVyRnVuY3Rpb25zLnB1c2goZnVuY3Rpb24gKGYpIHtcblx0XHRcdFx0XHRcdGlmIChmb3JtYXQgPT09IGYpIHJldHVybiB3cml0ZXJGdW5jdGlvbihmKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR3cml0ZXJGdW5jdGlvbnMucHVzaChmb3JtYXQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0YWRkUmVhZGVyOiBmdW5jdGlvbiAoZm9ybWF0LCByZWFkZXJGdW5jdGlvbikge1xuXHRcdFx0XHRpZiAodHlwZW9mIGZvcm1hdCA9PT0gJ3N0cmluZycpIHtcblx0XHRcdFx0XHRyZWFkZXJGdW5jdGlvbnMucHVzaChmdW5jdGlvbiAoZGF0YSwgZikge1xuXHRcdFx0XHRcdFx0aWYgKGZvcm1hdCA9PT0gZikgcmV0dXJuIHJlYWRlckZ1bmN0aW9uKGRhdGEsIGYpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJlYWRlckZ1bmN0aW9ucy5wdXNoKGZvcm1hdCk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRlbmNvZGU6IGZ1bmN0aW9uIChkYXRhLCBmb3JtYXQpIHtcblx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB3cml0ZXJGdW5jdGlvbnMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHR2YXIgZnVuYyA9IHdyaXRlckZ1bmN0aW9uc1tpXTtcblx0XHRcdFx0XHR2YXIgd3JpdGVyID0gZnVuYyhmb3JtYXQpO1xuXHRcdFx0XHRcdGlmICh3cml0ZXIpIHtcblx0XHRcdFx0XHRcdGVuY29kZVdyaXRlcihkYXRhLCB3cml0ZXIpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIHdyaXRlci5yZXN1bHQoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBvdXRwdXQgZm9ybWF0OiAnICsgZm9ybWF0KTtcblx0XHRcdH0sXG5cdFx0XHRkZWNvZGU6IGZ1bmN0aW9uIChkYXRhLCBmb3JtYXQpIHtcblx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCByZWFkZXJGdW5jdGlvbnMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHR2YXIgZnVuYyA9IHJlYWRlckZ1bmN0aW9uc1tpXTtcblx0XHRcdFx0XHR2YXIgcmVhZGVyID0gZnVuYyhkYXRhLCBmb3JtYXQpO1xuXHRcdFx0XHRcdGlmIChyZWFkZXIpIHtcblx0XHRcdFx0XHRcdHJldHVybiBkZWNvZGVSZWFkZXIocmVhZGVyKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBpbnB1dCBmb3JtYXQ6ICcgKyBmb3JtYXQpO1xuXHRcdFx0fSxcblx0XHRcdGFkZFNlbWFudGljRW5jb2RlOiBmdW5jdGlvbiAodGFnLCBmbikge1xuXHRcdFx0XHRpZiAodHlwZW9mIHRhZyAhPT0gJ251bWJlcicgfHwgdGFnJTEgIT09IDAgfHwgdGFnIDwgMCkge1xuXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcignVGFnIG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyJyk7XG5cdFx0XHRcdH1cblx0XHRcdFx0c2VtYW50aWNFbmNvZGVycy5wdXNoKHt0YWc6IHRhZywgZm46IGZufSk7XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fSxcblx0XHRcdGFkZFNlbWFudGljRGVjb2RlOiBmdW5jdGlvbiAodGFnLCBmbikge1xuXHRcdFx0XHRpZiAodHlwZW9mIHRhZyAhPT0gJ251bWJlcicgfHwgdGFnJTEgIT09IDAgfHwgdGFnIDwgMCkge1xuXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcignVGFnIG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyJyk7XG5cdFx0XHRcdH1cblx0XHRcdFx0c2VtYW50aWNEZWNvZGVyc1t0YWddID0gZm47XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fSxcblx0XHRcdFJlYWRlcjogUmVhZGVyLFxuXHRcdFx0V3JpdGVyOiBXcml0ZXJcblx0XHR9O1xuXHRcdFxuXHRcdC8qKiBOb2RlLmpzIEJ1ZmZlcnMgKiovXG5cdFx0ZnVuY3Rpb24gQnVmZmVyUmVhZGVyKGJ1ZmZlcikge1xuXHRcdFx0dGhpcy5idWZmZXIgPSBidWZmZXI7XG5cdFx0XHR0aGlzLnBvcyA9IDA7XG5cdFx0fVxuXHRcdEJ1ZmZlclJlYWRlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFJlYWRlci5wcm90b3R5cGUpO1xuXHRcdEJ1ZmZlclJlYWRlci5wcm90b3R5cGUucGVla0J5dGUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5idWZmZXJbdGhpcy5wb3NdO1xuXHRcdH07XG5cdFx0QnVmZmVyUmVhZGVyLnByb3RvdHlwZS5yZWFkQnl0ZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiB0aGlzLmJ1ZmZlclt0aGlzLnBvcysrXTtcblx0XHR9O1xuXHRcdEJ1ZmZlclJlYWRlci5wcm90b3R5cGUucmVhZFVpbnQxNiA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHZhciByZXN1bHQgPSB0aGlzLmJ1ZmZlci5yZWFkVUludDE2QkUodGhpcy5wb3MpO1xuXHRcdFx0dGhpcy5wb3MgKz0gMjtcblx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0fTtcblx0XHRCdWZmZXJSZWFkZXIucHJvdG90eXBlLnJlYWRVaW50MzIgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHR2YXIgcmVzdWx0ID0gdGhpcy5idWZmZXIucmVhZFVJbnQzMkJFKHRoaXMucG9zKTtcblx0XHRcdHRoaXMucG9zICs9IDQ7XG5cdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdH07XG5cdFx0QnVmZmVyUmVhZGVyLnByb3RvdHlwZS5yZWFkRmxvYXQzMiA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHZhciByZXN1bHQgPSB0aGlzLmJ1ZmZlci5yZWFkRmxvYXRCRSh0aGlzLnBvcyk7XG5cdFx0XHR0aGlzLnBvcyArPSA0O1xuXHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHR9O1xuXHRcdEJ1ZmZlclJlYWRlci5wcm90b3R5cGUucmVhZEZsb2F0NjQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHR2YXIgcmVzdWx0ID0gdGhpcy5idWZmZXIucmVhZERvdWJsZUJFKHRoaXMucG9zKTtcblx0XHRcdHRoaXMucG9zICs9IDg7XG5cdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdH07XG5cdFx0QnVmZmVyUmVhZGVyLnByb3RvdHlwZS5yZWFkQ2h1bmsgPSBmdW5jdGlvbiAobGVuZ3RoKSB7XG5cdFx0XHR2YXIgcmVzdWx0ID0gQnVmZmVyLmFsbG9jKGxlbmd0aCk7XG5cdFx0XHR0aGlzLmJ1ZmZlci5jb3B5KHJlc3VsdCwgMCwgdGhpcy5wb3MsIHRoaXMucG9zICs9IGxlbmd0aCk7XG5cdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdH07XG5cdFxuXHRcdGZ1bmN0aW9uIEJ1ZmZlcldyaXRlcihzdHJpbmdGb3JtYXQpIHtcblx0XHRcdHRoaXMuYnl0ZUxlbmd0aCA9IDA7XG5cdFx0XHR0aGlzLmRlZmF1bHRCdWZmZXJMZW5ndGggPSAxNjM4NDsgLy8gMTZrXG5cdFx0XHR0aGlzLmxhdGVzdEJ1ZmZlciA9IEJ1ZmZlci5hbGxvYyh0aGlzLmRlZmF1bHRCdWZmZXJMZW5ndGgpO1xuXHRcdFx0dGhpcy5sYXRlc3RCdWZmZXJPZmZzZXQgPSAwO1xuXHRcdFx0dGhpcy5jb21wbGV0ZUJ1ZmZlcnMgPSBbXTtcblx0XHRcdHRoaXMuc3RyaW5nRm9ybWF0ID0gc3RyaW5nRm9ybWF0O1xuXHRcdH1cblx0XHRCdWZmZXJXcml0ZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShXcml0ZXIucHJvdG90eXBlKTtcblx0XHRCdWZmZXJXcml0ZXIucHJvdG90eXBlLndyaXRlQnl0ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHRcdFx0dGhpcy5sYXRlc3RCdWZmZXJbdGhpcy5sYXRlc3RCdWZmZXJPZmZzZXQrK10gPSB2YWx1ZTtcblx0XHRcdGlmICh0aGlzLmxhdGVzdEJ1ZmZlck9mZnNldCA+PSB0aGlzLmxhdGVzdEJ1ZmZlci5sZW5ndGgpIHtcblx0XHRcdFx0dGhpcy5jb21wbGV0ZUJ1ZmZlcnMucHVzaCh0aGlzLmxhdGVzdEJ1ZmZlcik7XG5cdFx0XHRcdHRoaXMubGF0ZXN0QnVmZmVyID0gQnVmZmVyLmFsbG9jKHRoaXMuZGVmYXVsdEJ1ZmZlckxlbmd0aCk7XG5cdFx0XHRcdHRoaXMubGF0ZXN0QnVmZmVyT2Zmc2V0ID0gMDtcblx0XHRcdH1cblx0XHRcdHRoaXMuYnl0ZUxlbmd0aCsrO1xuXHRcdH1cblx0XHRCdWZmZXJXcml0ZXIucHJvdG90eXBlLndyaXRlRmxvYXQzMiA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHRcdFx0dmFyIGJ1ZmZlciA9IEJ1ZmZlci5hbGxvYyg0KTtcblx0XHRcdGJ1ZmZlci53cml0ZUZsb2F0QkUodmFsdWUsIDApO1xuXHRcdFx0dGhpcy53cml0ZUJ1ZmZlcihidWZmZXIpO1xuXHRcdH07XG5cdFx0QnVmZmVyV3JpdGVyLnByb3RvdHlwZS53cml0ZUZsb2F0NjQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0XHRcdHZhciBidWZmZXIgPSBCdWZmZXIuYWxsb2MoOCk7XG5cdFx0XHRidWZmZXIud3JpdGVEb3VibGVCRSh2YWx1ZSwgMCk7XG5cdFx0XHR0aGlzLndyaXRlQnVmZmVyKGJ1ZmZlcik7XG5cdFx0fTtcblx0XHRCdWZmZXJXcml0ZXIucHJvdG90eXBlLndyaXRlU3RyaW5nID0gZnVuY3Rpb24gKHN0cmluZywgbGVuZ3RoRnVuYykge1xuXHRcdFx0dmFyIGJ1ZmZlciA9IEJ1ZmZlci5mcm9tKHN0cmluZywgJ3V0Zi04Jyk7XG5cdFx0XHRsZW5ndGhGdW5jKGJ1ZmZlci5sZW5ndGgpO1xuXHRcdFx0dGhpcy53cml0ZUJ1ZmZlcihidWZmZXIpO1xuXHRcdH07XG5cdFx0QnVmZmVyV3JpdGVyLnByb3RvdHlwZS5jYW5Xcml0ZUJpbmFyeSA9IGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRyZXR1cm4gZGF0YSBpbnN0YW5jZW9mIEJ1ZmZlcjtcblx0XHR9O1xuXHRcdEJ1ZmZlcldyaXRlci5wcm90b3R5cGUud3JpdGVCaW5hcnkgPSBmdW5jdGlvbiAoYnVmZmVyLCBsZW5ndGhGdW5jKSB7XG5cdFx0XHRsZW5ndGhGdW5jKGJ1ZmZlci5sZW5ndGgpO1xuXHRcdFx0dGhpcy53cml0ZUJ1ZmZlcihidWZmZXIpO1xuXHRcdH07XG5cdFx0QnVmZmVyV3JpdGVyLnByb3RvdHlwZS53cml0ZUJ1ZmZlciA9IGZ1bmN0aW9uIChjaHVuaykge1xuXHRcdFx0aWYgKCEoY2h1bmsgaW5zdGFuY2VvZiBCdWZmZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdCdWZmZXJXcml0ZXIgb25seSBhY2NlcHRzIEJ1ZmZlcnMnKTtcblx0XHRcdGlmICghdGhpcy5sYXRlc3RCdWZmZXJPZmZzZXQpIHtcblx0XHRcdFx0dGhpcy5jb21wbGV0ZUJ1ZmZlcnMucHVzaChjaHVuayk7XG5cdFx0XHR9IGVsc2UgaWYgKHRoaXMubGF0ZXN0QnVmZmVyLmxlbmd0aCAtIHRoaXMubGF0ZXN0QnVmZmVyT2Zmc2V0ID49IGNodW5rLmxlbmd0aCkge1xuXHRcdFx0XHRjaHVuay5jb3B5KHRoaXMubGF0ZXN0QnVmZmVyLCB0aGlzLmxhdGVzdEJ1ZmZlck9mZnNldCk7XG5cdFx0XHRcdHRoaXMubGF0ZXN0QnVmZmVyT2Zmc2V0ICs9IGNodW5rLmxlbmd0aDtcblx0XHRcdFx0aWYgKHRoaXMubGF0ZXN0QnVmZmVyT2Zmc2V0ID49IHRoaXMubGF0ZXN0QnVmZmVyLmxlbmd0aCkge1xuXHRcdFx0XHRcdHRoaXMuY29tcGxldGVCdWZmZXJzLnB1c2godGhpcy5sYXRlc3RCdWZmZXIpO1xuXHRcdFx0XHRcdHRoaXMubGF0ZXN0QnVmZmVyID0gQnVmZmVyLmFsbG9jKHRoaXMuZGVmYXVsdEJ1ZmZlckxlbmd0aCk7XG5cdFx0XHRcdFx0dGhpcy5sYXRlc3RCdWZmZXJPZmZzZXQgPSAwO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLmNvbXBsZXRlQnVmZmVycy5wdXNoKHRoaXMubGF0ZXN0QnVmZmVyLnNsaWNlKDAsIHRoaXMubGF0ZXN0QnVmZmVyT2Zmc2V0KSk7XG5cdFx0XHRcdHRoaXMuY29tcGxldGVCdWZmZXJzLnB1c2goY2h1bmspO1xuXHRcdFx0XHR0aGlzLmxhdGVzdEJ1ZmZlciA9IEJ1ZmZlci5hbGxvYyh0aGlzLmRlZmF1bHRCdWZmZXJMZW5ndGgpO1xuXHRcdFx0XHR0aGlzLmxhdGVzdEJ1ZmZlck9mZnNldCA9IDA7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLmJ5dGVMZW5ndGggKz0gY2h1bmsubGVuZ3RoO1xuXHRcdH1cblx0XHRCdWZmZXJXcml0ZXIucHJvdG90eXBlLnJlc3VsdCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdC8vIENvcGllcyB0aGVtIGFsbCBpbnRvIGEgc2luZ2xlIEJ1ZmZlclxuXHRcdFx0dmFyIHJlc3VsdCA9IEJ1ZmZlci5hbGxvYyh0aGlzLmJ5dGVMZW5ndGgpO1xuXHRcdFx0dmFyIG9mZnNldCA9IDA7XG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY29tcGxldGVCdWZmZXJzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHZhciBidWZmZXIgPSB0aGlzLmNvbXBsZXRlQnVmZmVyc1tpXTtcblx0XHRcdFx0YnVmZmVyLmNvcHkocmVzdWx0LCBvZmZzZXQsIDAsIGJ1ZmZlci5sZW5ndGgpO1xuXHRcdFx0XHRvZmZzZXQgKz0gYnVmZmVyLmxlbmd0aDtcblx0XHRcdH1cblx0XHRcdGlmICh0aGlzLmxhdGVzdEJ1ZmZlck9mZnNldCkge1xuXHRcdFx0XHR0aGlzLmxhdGVzdEJ1ZmZlci5jb3B5KHJlc3VsdCwgb2Zmc2V0LCAwLCB0aGlzLmxhdGVzdEJ1ZmZlck9mZnNldCk7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdGlmICh0aGlzLnN0cmluZ0Zvcm1hdCkgcmV0dXJuIHJlc3VsdC50b1N0cmluZyh0aGlzLnN0cmluZ0Zvcm1hdCk7XG5cdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdH1cblx0XHRcblx0XHRpZiAodHlwZW9mIEJ1ZmZlciA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0YXBpLmFkZFJlYWRlcihmdW5jdGlvbiAoZGF0YSwgZm9ybWF0KSB7XG5cdFx0XHRcdGlmIChkYXRhIGluc3RhbmNlb2YgQnVmZmVyKSB7XG5cdFx0XHRcdFx0cmV0dXJuIG5ldyBCdWZmZXJSZWFkZXIoZGF0YSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKGZvcm1hdCA9PT0gJ2hleCcgfHwgZm9ybWF0ID09PSAnYmFzZTY0Jykge1xuXHRcdFx0XHRcdHZhciBidWZmZXIgPSBCdWZmZXIuZnJvbShkYXRhLCBmb3JtYXQpO1xuXHRcdFx0XHRcdHJldHVybiBuZXcgQnVmZmVyUmVhZGVyKGJ1ZmZlcik7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0YXBpLmFkZFdyaXRlcihmdW5jdGlvbiAoZm9ybWF0KSB7XG5cdFx0XHRcdGlmICghZm9ybWF0IHx8IGZvcm1hdCA9PT0gJ2J1ZmZlcicpIHtcblx0XHRcdFx0XHRyZXR1cm4gbmV3IEJ1ZmZlcldyaXRlcigpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGZvcm1hdCA9PT0gJ2hleCcgfHwgZm9ybWF0ID09PSAnYmFzZTY0Jykge1xuXHRcdFx0XHRcdHJldHVybiBuZXcgQnVmZmVyV3JpdGVyKGZvcm1hdCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblx0XHRcblx0XHQvKiogSGV4LWVuY29kaW5nIChhbmQgTGF0aW4xKSBmb3IgYnJvd3NlciAqKi9cblx0XHRmdW5jdGlvbiBIZXhSZWFkZXIoaGV4KSB7XG5cdFx0XHR0aGlzLmhleCA9IGhleDtcblx0XHRcdHRoaXMucG9zID0gMDtcblx0XHR9XG5cdFx0SGV4UmVhZGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoUmVhZGVyLnByb3RvdHlwZSk7XG5cdFx0SGV4UmVhZGVyLnByb3RvdHlwZS5wZWVrQnl0ZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHZhciBwYWlyID0gdGhpcy5oZXguc3Vic3RyaW5nKHRoaXMucG9zLCAyKTtcblx0XHRcdHJldHVybiBwYXJzZUludChwYWlyLCAxNik7XG5cdFx0fTtcblx0XHRIZXhSZWFkZXIucHJvdG90eXBlLnJlYWRCeXRlID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0dmFyIHBhaXIgPSB0aGlzLmhleC5zdWJzdHJpbmcodGhpcy5wb3MsIHRoaXMucG9zICsgMik7XG5cdFx0XHR0aGlzLnBvcyArPSAyO1xuXHRcdFx0cmV0dXJuIHBhcnNlSW50KHBhaXIsIDE2KTtcblx0XHR9O1xuXHRcdEhleFJlYWRlci5wcm90b3R5cGUucmVhZENodW5rID0gZnVuY3Rpb24gKGxlbmd0aCkge1xuXHRcdFx0dmFyIGhleCA9IHRoaXMuaGV4LnN1YnN0cmluZyh0aGlzLnBvcywgdGhpcy5wb3MgKyBsZW5ndGgqMik7XG5cdFx0XHR0aGlzLnBvcyArPSBsZW5ndGgqMjtcblx0XHRcdGlmICh0eXBlb2YgQnVmZmVyID09PSAnZnVuY3Rpb24nKSByZXR1cm4gQnVmZmVyLmZyb20oaGV4LCAnaGV4Jyk7XG5cdFx0XHRyZXR1cm4gbmV3IEJpbmFyeUhleChoZXgpO1xuXHRcdH07XG5cdFxuXHRcdGZ1bmN0aW9uIEhleFdyaXRlcihmaW5hbEZvcm1hdCkge1xuXHRcdFx0dGhpcy4kaGV4ID0gJyc7XG5cdFx0XHR0aGlzLmZpbmFsRm9ybWF0ID0gZmluYWxGb3JtYXQgfHwgJ2hleCdcblx0XHR9XG5cdFx0SGV4V3JpdGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoV3JpdGVyLnByb3RvdHlwZSk7XG5cdFx0SGV4V3JpdGVyLnByb3RvdHlwZS53cml0ZUJ5dGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0XHRcdGlmICh2YWx1ZSA8IDAgfHwgdmFsdWUgPiAyNTUpIHRocm93IG5ldyBFcnJvcignQnl0ZSB2YWx1ZSBvdXQgb2YgcmFuZ2U6ICcgKyB2YWx1ZSk7XG5cdFx0XHR2YXIgaGV4ID0gdmFsdWUudG9TdHJpbmcoMTYpO1xuXHRcdFx0aWYgKGhleC5sZW5ndGggPT0gMSkge1xuXHRcdFx0XHRoZXggPSAnMCcgKyBoZXg7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLiRoZXggKz0gaGV4O1xuXHRcdH1cblx0XHRIZXhXcml0ZXIucHJvdG90eXBlLmNhbldyaXRlQmluYXJ5ID0gZnVuY3Rpb24gKGNodW5rKSB7XG5cdFx0XHRyZXR1cm4gY2h1bmsgaW5zdGFuY2VvZiBCaW5hcnlIZXggfHwgKHR5cGVvZiBCdWZmZXIgPT09ICdmdW5jdGlvbicgJiYgY2h1bmsgaW5zdGFuY2VvZiBCdWZmZXIpO1xuXHRcdH1cblx0XHRIZXhXcml0ZXIucHJvdG90eXBlLndyaXRlQmluYXJ5ID0gZnVuY3Rpb24gKGNodW5rLCBsZW5ndGhGdW5jdGlvbikge1xuXHRcdFx0aWYgKGNodW5rIGluc3RhbmNlb2YgQmluYXJ5SGV4KSB7XG5cdFx0XHRcdGxlbmd0aEZ1bmN0aW9uKGNodW5rLmxlbmd0aCgpKTtcblx0XHRcdFx0dGhpcy4kaGV4ICs9IGNodW5rLiRoZXg7XG5cdFx0XHR9IGVsc2UgaWYgKHR5cGVvZiBCdWZmZXIgPT09ICdmdW5jdGlvbicgJiYgY2h1bmsgaW5zdGFuY2VvZiBCdWZmZXIpIHtcblx0XHRcdFx0bGVuZ3RoRnVuY3Rpb24oY2h1bmsubGVuZ3RoKTtcblx0XHRcdFx0dGhpcy4kaGV4ICs9IGNodW5rLnRvU3RyaW5nKCdoZXgnKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ0hleFdyaXRlciBvbmx5IGFjY2VwdHMgQmluYXJ5SGV4IG9yIEJ1ZmZlcnMnKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0SGV4V3JpdGVyLnByb3RvdHlwZS5yZXN1bHQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRpZiAodGhpcy5maW5hbEZvcm1hdCA9PT0gJ2J1ZmZlcicgJiYgdHlwZW9mIEJ1ZmZlciA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRyZXR1cm4gQnVmZmVyLmZyb20odGhpcy4kaGV4LCAnaGV4Jyk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbmV3IEJpbmFyeUhleCh0aGlzLiRoZXgpLnRvU3RyaW5nKHRoaXMuZmluYWxGb3JtYXQpO1xuXHRcdH1cblx0XHRIZXhXcml0ZXIucHJvdG90eXBlLndyaXRlU3RyaW5nID0gZnVuY3Rpb24gKHN0cmluZywgbGVuZ3RoRnVuY3Rpb24pIHtcblx0XHRcdHZhciBidWZmZXIgPSBCaW5hcnlIZXguZnJvbVV0ZjhTdHJpbmcoc3RyaW5nKTtcblx0XHRcdGxlbmd0aEZ1bmN0aW9uKGJ1ZmZlci5sZW5ndGgoKSk7XG5cdFx0XHR0aGlzLiRoZXggKz0gYnVmZmVyLiRoZXg7XG5cdFx0fVxuXG5cdFx0YXBpLmFkZFJlYWRlcihmdW5jdGlvbiAoZGF0YSwgZm9ybWF0KSB7XG5cdFx0XHRpZiAoZGF0YSBpbnN0YW5jZW9mIEJpbmFyeUhleCB8fCBkYXRhLiRoZXgpIHtcblx0XHRcdFx0cmV0dXJuIG5ldyBIZXhSZWFkZXIoZGF0YS4kaGV4KTtcblx0XHRcdH1cblx0XHRcdGlmIChmb3JtYXQgPT09ICdoZXgnKSB7XG5cdFx0XHRcdHJldHVybiBuZXcgSGV4UmVhZGVyKGRhdGEpXG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0YXBpLmFkZFdyaXRlcihmdW5jdGlvbiAoZm9ybWF0KSB7XG5cdFx0XHRpZiAoZm9ybWF0ID09PSAnaGV4Jykge1xuXHRcdFx0XHRyZXR1cm4gbmV3IEhleFdyaXRlcigpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIGFwaTtcblx0fSkoKTtcblxuXHRDQk9SLmFkZFNlbWFudGljRW5jb2RlKDAsIGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0aWYgKGRhdGEgaW5zdGFuY2VvZiBEYXRlKSB7XG5cdFx0XHRyZXR1cm4gZGF0YS50b0lTT1N0cmluZygpO1xuXHRcdH1cblx0fSkuYWRkU2VtYW50aWNEZWNvZGUoMCwgZnVuY3Rpb24gKGlzb1N0cmluZykge1xuXHRcdHJldHVybiBuZXcgRGF0ZShpc29TdHJpbmcpO1xuXHR9KS5hZGRTZW1hbnRpY0RlY29kZSgxLCBmdW5jdGlvbiAoaXNvU3RyaW5nKSB7XG5cdFx0cmV0dXJuIG5ldyBEYXRlKGlzb1N0cmluZyk7XG5cdH0pO1xuXG5cdHJldHVybiBDQk9SO1xufSk7Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/cbor-sync/main.js\n");

/***/ })

};
;